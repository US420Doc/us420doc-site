<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>US420DOC Intake</title>
  <style>
    body { font-family: Poppins, sans-serif; color: #1a751a; padding: 20px; }
    .hidden { display: none; }
    label { display: block; margin: 10px 0; }
    input, select { width: 100%; padding: 8px; box-sizing: border-box; }
    button { background: #1a751a; color: white; padding: 10px 20px; border: none; cursor: pointer; border-radius: 4px; }
  </style>
</head>
<body>

  <div id="form-area">
    <h1>Patient Intake Form</h1>
    <form
      id="mainForm"
      action="https://script.google.com/macros/s/AKfycbyN85mElGPS6vIogrZChCAipVCymiEZOXg34ewTiX-poYkVmqrA-sOQm3Y42_3T4KQ/exec"
      method="POST"
      enctype="multipart/form-data"
      novalidate
    >
      <!-- Hidden payment values (populated via JS) -->
      <input type="hidden" id="paymentEmail" name="paymentEmail">
      <input type="hidden" id="paymentType"  name="paymentType">
      <input type="hidden" id="amount"       name="amount">
      <input type="hidden" id="last4"        name="last4">
      <input type="hidden" id="squarePhone"  name="squarePhone">

      <!-- Patient info -->
      <label>First Name
        <input type="text" name="firstName" required>
      </label>
      <label>Last Name
        <input type="text" name="lastName" required>
      </label>
      <label>Birthdate
        <input type="date" name="birthdate" required>
      </label>
      <label>Address
        <input type="text" name="fullAddress" required>
      </label>
      <label>Phone (Square)
        <input type="tel" name="squarePhone" required>
      </label>
      <label>Email
        <input type="email" name="email" required>
      </label>
      <!-- Other scalar fields… -->
      
      <!-- File uploads -->
      <label>Driver’s License Front
        <input type="file" name="dlFront" accept="image/*,application/pdf" required>
      </label>
      <label>Driver’s License Back
        <input type="file" name="dlBack" accept="image/*,application/pdf" required>
      </label>
      <label>Medical Record (optional)
        <input type="file" name="medicalRecord" accept="image/*,application/pdf">
      </label>
      <label>Proof of Address (optional)
        <input type="file" name="proofOfAddress" accept="image/*,application/pdf">
      </label>
      <!-- Caregiver uploads… -->
      <label>Caregiver 1 ID Front
        <input type="file" name="cg1_dlFront" accept="image/*,application/pdf">
      </label>
      <label>Caregiver 1 ID Back
        <input type="file" name="cg1_dlBack" accept="image/*,application/pdf">
      </label>

      <button type="submit">Submit Application</button>
    </form>
  </div>

  <script>
    // Populate hidden payment fields just before native submit
    document.getElementById('mainForm').addEventListener('submit', () => {
      // Replace these with your actual functions or values
      document.getElementById('paymentEmail').value = getSquarePaymentEmail();
      document.getElementById('paymentType').value  = getSquarePaymentType();
      document.getElementById('amount').value       = getSquareAmount();
      document.getElementById('last4').value        = getSquareLast4();
      document.getElementById('squarePhone').value  = getSquarePhoneNumber();
      // The form then submits natively—no fetch(), no preventDefault().
    });

    // Stub functions—wire these up to your Square logic
    function getSquarePaymentEmail() { return "customer@example.com"; }
    function getSquarePaymentType()  { return "card"; }
    function getSquareAmount()       { return "199.00"; }
    function getSquareLast4()        { return "4242"; }
    function getSquarePhoneNumber()  { return "404-123-4567"; }
  </script>

</body>
</html>


