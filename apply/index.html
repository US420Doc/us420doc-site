<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>Complete Your Medical Intake</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Poppins', sans-serif; margin:0; padding:20px; background:#f0fdf4; color:#14532d; }
    h1 { text-align:center; margin-top:40px; }
    #jotformEmbed { max-width:600px; margin:30px auto; }
    .debug { background:#fee; border:1px solid #f99; padding:10px; margin-bottom:20px; }
  </style>
</head>
<body>

  <div class="debug" id="debug"></div>

  <h1>Complete Your Medical Intake</h1>
  <div id="jotformEmbed"></div>

  <script>
    // 1) Pull values out of localStorage
    const firstName = localStorage.getItem('firstName') || '';
    const lastName  = localStorage.getItem('lastName')  || '';
    const email     = localStorage.getItem('email')     || '';
    const phone     = localStorage.getItem('phone')     || '';

    // 2) Debug output so we can see whatâ€™s stored
    document.getElementById('debug').textContent =
      `Debug info:
       firstName = ${firstName}
       lastName  = ${lastName}
       email     = ${email}
       phone     = ${phone}`;

    // 3) Build a query string matching your JotForm field names
    const params = new URLSearchParams();
    if (firstName) params.set('firstName', firstName);
    if (lastName)  params.set('lastName',  lastName);
    if (email)     params.set('email',     email);
    if (phone)     params.set('phone',     phone);

    // 4) Inject the JotForm script tag
    const s = document.createElement('script');
    s.type = 'text/javascript';
    s.src  = 'https://form.jotform.com/jsform/251263863957064?' + params.toString();
    document.getElementById('jotformEmbed').appendChild(s);
  </script>

</body>
</html>
